#!/bin/bash
# --------------------------------------------------------------------
# PROJECT KATHARA - COMPANY NETWORK SIMULATION WITH DMZ, VLAN and Switching.
#
# This file defines the network topology for a Kathara lab.
# that simulates a typical enterprise network with three distinct VLANs:
# * VLAN 10 Public (public/internet network) - PUBLIC IPs.
# * VLAN 20 DMZ (demilitarized zone for public services).
# * VLAN 30 Private (private internal network).
#
# --------------------------------------------------------------------

# TOPOLOGY CONFIGURATION WITH VLAN

# ROUTER: Central device with a single trunk interface.
# Connects to 'trunk_link' to communicate with the switch.
router[0]="trunk_link" # Physical eth0 interface of the router

# MAIN SWITCH: It manages all VLANs.
# Its eth0 port is the trunk port that connects to the router.
switch[0]="trunk_link"     # Trunk port to router
switch[1]="vlan10"          # Port access VLAN 10 - Public
switch[2]="vlan20"          # Port access VLAN 20 - DMZ
switch[3]="vlan30"          # Port access VLAN 30 - Private

# END DEVICES ASSIGNED TO VLANS:

# Client in VLAN 10 Public (simulates external/internet users).
# IP: 203.0.113.10/24, Gateway: 203.0.113.1
# Uses PUBLIC IP addresses to simulate real internet
client_public[0]="vlan10"

# Web server in VLAN 20 DMZ (demilitarized zone).
# IP: 10.0.1.10/24, Gateway: 10.0.1.1
# Provides web services accessible from both public and private
webserver[0]="vlan20"

# Client in VLAN 30 Private (internal corporate network).
# IP: 172.16.1.10/24, Gateway: 172.16.1.1
# Completely private internal corporate network
client_private[0]="vlan30"

# --------------------------------------------------------------------
# SECURITY RULES IMPLEMENTED IN THE ROUTER:
# 1. Public -> DMZ: HTTP only (port 80) to the web server.
# 2. Private -> DMZ: HTTP only (port 80) to the web server
# 3. Private -> Public: All traffic allowed
# 4. DMZ -> Private: BLOCKED (DMZ security principle)
# 5. Public -> Private: BLOCKED (internal network isolation).
# --------------------------------------------------------------------